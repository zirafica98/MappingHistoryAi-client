{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import $ from\"jquery\";import{serverLink}from'../Variable';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatBot(){var typeText=function typeText(element,text){var index=0;var interval=setInterval(function(){if(index<text.length){element.innerHTML+=text.charAt(index);document.querySelector('#chat_container').scrollTop=document.querySelector('#chat_container').scrollHeight;index++;}else{clearInterval(interval);}},10);};var generateUniqueId=function generateUniqueId(){var timestamp=Date.now();var randomNumber=Math.random();var hexadecimalString=randomNumber.toString(16);return\"id-\".concat(timestamp,\"-\").concat(hexadecimalString);};var chatStripe=function chatStripe(isAi,value,uniqueId){return\"\\n            <div class=\\\"wraooer \".concat(isAi&&'ai',\"\\\">\\n              <div class=\\\"chat\\\">\\n                <div class = \\\"profile\\\">\\n                  <img\\n                    src=\\\"\").concat(isAi?\"bot.svg\":\"user.svg\",\"\\\"\\n                    alt=\\\"\").concat(isAi?'bot':'user',\"\\\"\\n                  />\\n                </div>\\n                <div class = \\\"message\\\" id=\").concat(uniqueId,\">\").concat(value,\"</div>\\n              </div>\\n            </div>\\n          \");};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var quest,location;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:quest=document.getElementById(\"prompt\").value;location=document.getElementById(\"location\").value;window.location.href=\"?location=\"+location+\"&question=\"+quest;e.preventDefault();// const chatContainer = document.querySelector('#chat_container');\n// e.preventDefault();\n// const quest = document.getElementById(\"prompt\").value;\n// chatContainer.innerHTML+=chatStripe(false,quest);\n// document.getElementById(\"prompt\").value=\"\";\n// const uniqueId = generateUniqueId();\n// chatContainer.innerHTML+=chatStripe(true,\" \",uniqueId);\n// chatContainer.scrollTop = chatContainer.scrollHeight;\n// const messageDiv = document.getElementById(uniqueId);\n// const respons = await fetch(serverLink,{\n//   method:'POST',\n//   headers:{\n//     'Content-Type': 'application/json',\n//   },\n//   body: JSON.stringify({\n//     prompt: quest\n//   })\n// })\n// messageDiv.innerHTML = \"\";\n// if(respons.ok){\n//   const data = await respons.json();\n//   const parsedData = data.bot.trim();\n//   typeText(messageDiv,parsedData);\n// }else{\n//   const err = await respons.text();\n//   messageDiv.innerHTML = \"Something went wrong\";\n//   alert(err);\n// }\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var openChat=function openChat(){var chatContainer=document.querySelector('#chat_container');if($(\".chat-app\").hasClass(\"active\")){$(\".chat-app\").removeClass(\"active\");chatContainer.innerHTML=\"\";}else{$(\".chat-app\").addClass(\"active\");chatContainer.innerHTML+=chatStripe(true,\"Hello, how may I help you?\",\"firstMessage\");}};useEffect(function(){document.getElementById(\"prompt\").addEventListener('keyup',function(e){if(e.keyCode===13){handleSubmit(e);}});});return/*#__PURE__*/_jsxs(\"div\",{id:\"app\",className:\"chat-bot\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"location\",id:\"location\",placeholder:\"Location\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"prompt\",id:\"prompt\",rows:\"1\",cols:\"1\",placeholder:\"Ask....\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,children:/*#__PURE__*/_jsx(\"img\",{src:\"send.svg\"})})]}),/*#__PURE__*/_jsx(\"button\",{id:\"message-button\",onClick:openChat,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-commenting-o\"})})]});}export default ChatBot;","map":{"version":3,"names":["React","useEffect","$","serverLink","ChatBot","typeText","element","text","index","interval","setInterval","length","innerHTML","charAt","document","querySelector","scrollTop","scrollHeight","clearInterval","generateUniqueId","timestamp","Date","now","randomNumber","Math","random","hexadecimalString","toString","chatStripe","isAi","value","uniqueId","handleSubmit","e","quest","getElementById","location","window","href","preventDefault","openChat","chatContainer","hasClass","removeClass","addClass","addEventListener","keyCode"],"sources":["/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/src/ChatBot/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport $ from \"jquery\"\nimport { serverLink } from '../Variable';\nfunction ChatBot() {\n      const typeText = (element,text) =>{\n        let index = 0;\n      \n        let interval = setInterval(() => {\n          if(index < text.length){\n            element.innerHTML += text.charAt(index);\n            document.querySelector('#chat_container').scrollTop = document.querySelector('#chat_container').scrollHeight;\n            index++;\n          }else{\n            clearInterval(interval);\n          }\n        },10)\n      }\n      \n      const generateUniqueId = () =>{\n        const timestamp = Date.now();\n        const randomNumber = Math.random();\n        const hexadecimalString = randomNumber.toString(16);\n      \n        return `id-${timestamp}-${hexadecimalString}`;\n      }\n      \n      const chatStripe = (isAi,value,uniqueId) =>{\n        return(\n          `\n            <div class=\"wraooer ${isAi && 'ai'}\">\n              <div class=\"chat\">\n                <div class = \"profile\">\n                  <img\n                    src=\"${isAi ? \"bot.svg\" : \"user.svg\"}\"\n                    alt=\"${isAi? 'bot' : 'user'}\"\n                  />\n                </div>\n                <div class = \"message\" id=${uniqueId}>${value}</div>\n              </div>\n            </div>\n          `\n        )\n      }\n\n\n    const handleSubmit = async (e) =>{\n      const quest = document.getElementById(\"prompt\").value;\n      const location = document.getElementById(\"location\").value;\n      window.location.href=\"?location=\"+location +\"&question=\" + quest;\n      e.preventDefault();\n        // const chatContainer = document.querySelector('#chat_container');\n        // e.preventDefault();\n        // const quest = document.getElementById(\"prompt\").value;\n      \n        // chatContainer.innerHTML+=chatStripe(false,quest);\n        // document.getElementById(\"prompt\").value=\"\";\n\n      \n        // const uniqueId = generateUniqueId();\n        // chatContainer.innerHTML+=chatStripe(true,\" \",uniqueId);\n      \n        // chatContainer.scrollTop = chatContainer.scrollHeight;\n      \n        // const messageDiv = document.getElementById(uniqueId);\n      \n        // const respons = await fetch(serverLink,{\n        //   method:'POST',\n        //   headers:{\n        //     'Content-Type': 'application/json',\n        //   },\n        //   body: JSON.stringify({\n        //     prompt: quest\n        //   })\n        // })\n        // messageDiv.innerHTML = \"\";\n      \n        // if(respons.ok){\n        //   const data = await respons.json();\n        //   const parsedData = data.bot.trim();\n      \n        //   typeText(messageDiv,parsedData);\n        // }else{\n        //   const err = await respons.text();\n      \n        //   messageDiv.innerHTML = \"Something went wrong\";\n        //   alert(err);\n        // }\n      }\n\n    const openChat = () =>{\n      const chatContainer = document.querySelector('#chat_container');\n\n\n        if($(\".chat-app\").hasClass(\"active\")){\n            $(\".chat-app\").removeClass(\"active\");\n            chatContainer.innerHTML=\"\";\n        }else{\n            $(\".chat-app\").addClass(\"active\");\n            chatContainer.innerHTML+=chatStripe(true,\"Hello, how may I help you?\",\"firstMessage\")\n        }\n    }\n\n    useEffect(()=>{\n        document.getElementById(\"prompt\").addEventListener('keyup', (e)=>{\n            if(e.keyCode ===13){\n              handleSubmit(e);\n            }\n          })\n    }) \n\n    return (\n            <div id=\"app\" className='chat-bot'>\n                <div className='chat-app'>\n                    {/* <div id=\"chat_container\"></div> */}\n                    <input name=\"location\" id=\"location\" placeholder='Location'></input>\n                    <textarea name=\"prompt\" id=\"prompt\" rows=\"1\" cols=\"1\" placeholder=\"Ask....\"></textarea>\n                    <button type=\"submit\" onClick={handleSubmit}><img src=\"send.svg\"></img></button>\n                </div>\n                <button id='message-button' onClick={openChat}>\n                    <i className=\"fa fa-commenting-o\"></i>\n                  </button>\n            </div>\n    );\n}\n\nexport default ChatBot;"],"mappings":"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"},"metadata":{},"sourceType":"module"}