{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import $ from\"jquery\";import{serverLink}from'../Variable';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatBot(){var typeText=function typeText(element,text){var index=0;var interval=setInterval(function(){if(index<text.length){element.innerHTML+=text.charAt(index);document.querySelector('#chat_container').scrollTop=document.querySelector('#chat_container').scrollHeight;index++;}else{clearInterval(interval);}},10);};var generateUniqueId=function generateUniqueId(){var timestamp=Date.now();var randomNumber=Math.random();var hexadecimalString=randomNumber.toString(16);return\"id-\".concat(timestamp,\"-\").concat(hexadecimalString);};var chatStripe=function chatStripe(isAi,value,uniqueId){return\"\\n            <div class=\\\"wraooer \".concat(isAi&&'ai',\"\\\">\\n              <div class=\\\"chat\\\">\\n                <div class = \\\"profile\\\">\\n                  <img\\n                    src=\\\"\").concat(isAi?\"bot.svg\":\"user.svg\",\"\\\"\\n                    alt=\\\"\").concat(isAi?'bot':'user',\"\\\"\\n                  />\\n                </div>\\n                <div class = \\\"message\\\" id=\").concat(uniqueId,\">\").concat(value,\"</div>\\n              </div>\\n            </div>\\n          \");};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var chatContainer,quest,uniqueId,messageDiv,respons,data,parsedData,err;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:chatContainer=document.querySelector('#chat_container');e.preventDefault();quest=document.getElementById(\"prompt\").value;chatContainer.innerHTML+=chatStripe(false,quest);document.getElementById(\"prompt\").value=\"\";uniqueId=generateUniqueId();chatContainer.innerHTML+=chatStripe(true,\" \",uniqueId);chatContainer.scrollTop=chatContainer.scrollHeight;messageDiv=document.getElementById(uniqueId);_context.next=11;return fetch(serverLink,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:quest})});case 11:respons=_context.sent;messageDiv.innerHTML=\"\";if(!respons.ok){_context.next=21;break;}_context.next=16;return respons.json();case 16:data=_context.sent;parsedData=data.bot.trim();typeText(messageDiv,parsedData);_context.next=26;break;case 21:_context.next=23;return respons.text();case 23:err=_context.sent;messageDiv.innerHTML=\"Something went wrong\";alert(err);case 26:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var openChat=function openChat(){var chatContainer=document.querySelector('#chat_container');if($(\".chat-app\").hasClass(\"active\")){$(\".chat-app\").removeClass(\"active\");chatContainer.innerHTML=\"\";}else{$(\".chat-app\").addClass(\"active\");chatContainer.innerHTML+=chatStripe(true,\"Hello, how may I help you?\",\"firstMessage\");}};useEffect(function(){document.getElementById(\"prompt\").addEventListener('keyup',function(e){if(e.keyCode===13){handleSubmit(e);}});});return/*#__PURE__*/_jsxs(\"div\",{id:\"app\",className:\"chat-bot\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"chat_container\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"prompt\",id:\"prompt\",rows:\"1\",cols:\"1\",placeholder:\"Ask....\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,children:/*#__PURE__*/_jsx(\"img\",{src:\"send.svg\"})})]}),/*#__PURE__*/_jsx(\"button\",{id:\"message-button\",onClick:openChat,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-commenting-o\"})})]});}export default ChatBot;","map":{"version":3,"names":["React","useEffect","$","serverLink","ChatBot","typeText","element","text","index","interval","setInterval","length","innerHTML","charAt","document","querySelector","scrollTop","scrollHeight","clearInterval","generateUniqueId","timestamp","Date","now","randomNumber","Math","random","hexadecimalString","toString","chatStripe","isAi","value","uniqueId","handleSubmit","e","chatContainer","preventDefault","quest","getElementById","messageDiv","fetch","method","headers","body","JSON","stringify","prompt","respons","ok","json","data","parsedData","bot","trim","err","alert","openChat","hasClass","removeClass","addClass","addEventListener","keyCode"],"sources":["/Users/mihajlopetrovic/Desktop/Posao/MappingHistory-AI/client-2/src/ChatBot/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport $ from \"jquery\"\nimport { serverLink } from '../Variable';\nfunction ChatBot() {\n      const typeText = (element,text) =>{\n        let index = 0;\n      \n        let interval = setInterval(() => {\n          if(index < text.length){\n            element.innerHTML += text.charAt(index);\n            document.querySelector('#chat_container').scrollTop = document.querySelector('#chat_container').scrollHeight;\n            index++;\n          }else{\n            clearInterval(interval);\n          }\n        },10)\n      }\n      \n      const generateUniqueId = () =>{\n        const timestamp = Date.now();\n        const randomNumber = Math.random();\n        const hexadecimalString = randomNumber.toString(16);\n      \n        return `id-${timestamp}-${hexadecimalString}`;\n      }\n      \n      const chatStripe = (isAi,value,uniqueId) =>{\n        return(\n          `\n            <div class=\"wraooer ${isAi && 'ai'}\">\n              <div class=\"chat\">\n                <div class = \"profile\">\n                  <img\n                    src=\"${isAi ? \"bot.svg\" : \"user.svg\"}\"\n                    alt=\"${isAi? 'bot' : 'user'}\"\n                  />\n                </div>\n                <div class = \"message\" id=${uniqueId}>${value}</div>\n              </div>\n            </div>\n          `\n        )\n      }\n\n\n    const handleSubmit = async (e) =>{\n        const chatContainer = document.querySelector('#chat_container');\n        e.preventDefault();\n        const quest = document.getElementById(\"prompt\").value;\n      \n        chatContainer.innerHTML+=chatStripe(false,quest);\n        document.getElementById(\"prompt\").value=\"\";\n\n      \n        const uniqueId = generateUniqueId();\n        chatContainer.innerHTML+=chatStripe(true,\" \",uniqueId);\n      \n        chatContainer.scrollTop = chatContainer.scrollHeight;\n      \n        const messageDiv = document.getElementById(uniqueId);\n      \n        const respons = await fetch(serverLink,{\n          method:'POST',\n          headers:{\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            prompt: quest\n          })\n        })\n        messageDiv.innerHTML = \"\";\n      \n        if(respons.ok){\n          const data = await respons.json();\n          const parsedData = data.bot.trim();\n      \n          typeText(messageDiv,parsedData);\n        }else{\n          const err = await respons.text();\n      \n          messageDiv.innerHTML = \"Something went wrong\";\n          alert(err);\n        }\n      }\n\n    const openChat = () =>{\n      const chatContainer = document.querySelector('#chat_container');\n\n\n        if($(\".chat-app\").hasClass(\"active\")){\n            $(\".chat-app\").removeClass(\"active\");\n            chatContainer.innerHTML=\"\";\n        }else{\n            $(\".chat-app\").addClass(\"active\");\n            chatContainer.innerHTML+=chatStripe(true,\"Hello, how may I help you?\",\"firstMessage\")\n        }\n    }\n\n    useEffect(()=>{\n        document.getElementById(\"prompt\").addEventListener('keyup', (e)=>{\n            if(e.keyCode ===13){\n              handleSubmit(e);\n            }\n          })\n    }) \n\n    return (\n            <div id=\"app\" className='chat-bot'>\n                <div className='chat-app'>\n                    <div id=\"chat_container\"></div>\n                    <textarea name=\"prompt\" id=\"prompt\" rows=\"1\" cols=\"1\" placeholder=\"Ask....\"></textarea>\n                    <button type=\"submit\" onClick={handleSubmit}><img src=\"send.svg\"></img></button>\n                </div>\n                <button id='message-button' onClick={openChat}>\n                    <i className=\"fa fa-commenting-o\"></i>\n                  </button>\n            </div>\n    );\n}\n\nexport default ChatBot;"],"mappings":"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"},"metadata":{},"sourceType":"module"}